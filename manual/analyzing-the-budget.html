---
layout: manual
title: Analyzing the Budget
---
<h2>Analyzing the Budget</h2>

<h3>Importing Transaction Data</h3>

<p>
	The primary feature of UnderBudget is its ability to compare the estimated
	income and expense values against actual incomes and purchases by importing
	transactions from an external source (e.g., GnuCash, Quicken).
</p>

<p>
	A transaction, in its basic form, is an amount of currency moved from one
	account to another. An income transaction, such as a paycheck, would be a
	transfer from an income account (e.g., salary) to an asset account (e.g., bank
	account). For more information on how to setup and record transactions, see the
	documentation specific to the tool you wish to use (GnuCash, Quicken, etc.).
</p>

<img src="assets/img/manual/gnucash-ledger.jpg" alt="GnuCash entry ledger" />

<p class="note">
	Note: Currently UnderBudget can only support transaction imports from
	uncompressed GnuCash files and Quicken qif files.
</p>

<p>
	To perform an import, select the “Import from” option in the File menu, or the
	import toolbar button.
</p>

<img src="assets/img/manual/import-toolbar-button.jpg" alt="Import toolbar button" />

<p>
	An open dialog will pop-up and the user may choose the file from which to
	import transaction data. The file type selection applies a filter for
	supported files.
</p>

<p>
	For convenience, UnderBudget will remember the last import file used. This
	means that the user does not have to re-select the import file every time
	UnderBudget is used. Selecting “Import” from the File menu or the import
	toolbar button will use the last-used import file, while selecting “Import
	from” from the File menu will allow for selecting a different import file.
</p>

<h3>Running a Report</h3>

<p>
	UnderBudget will automatically run a report comparing the imported transaction
	data against the defined estimates after importing data or when an estimate’s
	match rules have been modified.
</p>

<p>
	The report can be manual re-run by selecting the “Re-run report” option from
	the Report menu.
</p>

<h4>Understanding How Transactions Are Matched</h4>

<p>
	Transactions are matched against estimates in the following order.
</p>

<ol>
	<li>
		If the full text or description of a transaction is the same as an estimate
		match rule (e.g., “Birthday gift for Bob”)
	</li>
	<li>
		Else if the full text or description of a transaction contains a keyword (a
		word or phrase followed by a colon) that is the same as an estimate match
		rule (e.g., “Disney Vacation: plain tickets” where “Disney Vacation” is an
		estimate match rule)
	</li>
	<li>
		Else if the transaction’s withdrawal or deposit account (depending on the
		transaction type, see below) is the same as an estimate match rule (e.g.,
		“Assets:Bank Account”, “Expense:Groceries”)
	</li>
	<li>
		Else it did not match any estimate rules and the transaction is allocated as
		an unbudgeted income or unbudgeted expense (depending on the transaction type,
		see below)
	</li>
</ol>

<p>
	There are four account types typically used by 3rd party ledger applications
	and supported by UnderBudget.
</p>

<ul>
	<li>Asset accounts (bank accounts, cash)</li>
	<li>Expense accounts (groceries, utilities)</li>
	<li>Income accounts (salary, gifts)</li>
	<li>Liability accounts (credit cards, loans)</li>
</ul>

<p>
	When transactions are imported, they are internally classified according to the
	type of withdrawal and deposit accounts. That is, the account out of which
	currency is transferred and the account into which currency is transferred.
</p>

<ol>
	<li>
		Transfers from an asset account to an expense account are expense transactions.
		<ul>
			<li>
				The deposit account (the expense account) is checked against any matching
				estimate rules.
			</li>
			<li>
				If no matches are found, it is an unbudgeted expense.
			</li>
		</ul>
	</li>
	<li>
		Transfers from an asset account to a liability account are payment
		transactions.
		<ul>
			<li>
				Payment transactions are not normally accounted for since the individual
				purchases made with the liability account (e.g., credit card) have already
				been accounted for as expense transactions.
			</li>
			<li>
				If allocation of a payment transaction is desired, it must be done as a text
				or keyword match.
			</li>
		</ul>
	</li>
	<li>
		Transfers from one asset account to another asset account are transfer
		transactions.
		<ul>
			<li>
				Transfer transactions are not normally accounted for since no currency has
				left possession of the original entity (e.g., a typical transfer transaction
				is a withdrawal from a bank account to cash, then spending of the cash would
				be an expense transaction).
			</li>
			<li>
				If allocation of a transfer transaction is desired, it must be done as a
				text or keyword match. Note that doing so may result in an incorrect ending
				balance being calculated.
			</li>
		</ul>
	</li>
	<li>
		Transfers from an expense account to an asset or liability account are refund
		transactions.
		<ul>
			<li>
				The withdrawal account (the expense account) is checked against any matching
				estimate rules.
			</li>
			<li>
				If no matches are found, it is an unbudgeted income.
			</li>
		</ul>
	</li>
	<li>
		Transfers from an income account to an asset account are income transactions.
		<ul>
			<li>
				The withdrawal account (the income account) is checked against any matching
				estimate rules.
			</li>
			<li>
				If no matches are found, it is an unbudgeted income.
			</li>
		</ul>
	</li>
	<li>
		Transfers from an income account to an expense or liability account are direct
		transactions.
		<ul>
			<li>
				Direct transactions are not normally accounted for since no currency entered
				possession of the original entity (e.g., taxes deducted from a paycheck may
				be entered into the ledger application as a transfer from the income account
				to a tax expense account).
			</li>
			<li>
				If allocation of a direct transaction is desired, it must be done as a text
				or keyword match. Note that doing so may result in an incorrect ending
				balance being calculated.
			</li>
		</ul>
	</li>
	<li>
		Transfers from a liability account to an asset account are loan transactions.
		<ul>
			<li>
				The withdrawal account (the liability account) is checked against any
				matching estimate rules.
			</li>
			<li>
				If no matches are found, it is an unbudgeted income.
			</li>
		</ul>
	</li>
	<li>
		Transfers from a liability account to an expense or to another liability account are expense transactions.
		<ul>
			<li>
				The deposit account (the expense or second liability account) is checked
				against any matching estimate rules.
			</li>
			<li>
				In the case of a liability-to-liability transaction, it is considered an
				expense rather than a transfer because the “expense” made out of the first
				liability account must eventually be paid out of an asset account (i.e., a
				payment transaction, which is not normally accounted for since it is
				expected for the original expense on the liability to have been accounted
				for as an expense transaction).
			</li>
			<li>
				If no matches are found, it is an unbudgeted expense.
			</li>
		</ul>
	</li>
</ol>

<p class="note">
	Note: asset-to-income, expense-to-expense, expense-to-income, income-to-income,
	and liability-to-income are not considered valid transactions (from an
	accounting perspective) and are ignored.
</p>

<h4>The Comparison Report</h4>

<p>
	The report detailing the difference between the estimated values for each
	estimate and the actual values--obtained by the sum of all transactions matched
	against the estimate--is viewed by selecting the “Comparison Report” option
	from the Report menu or the Report toolbar button.
</p>

<img src="assets/img/manual/comparison-report.jpg" alt="Comparison report" />

<p>
	The comparison report lists each estimate as defined with its expected value,
	the actual value, and the difference between the two. The list of transactions
	matched against each estimate can be seen by clicking the “Show” button of an
	estimate.
</p>

<img src="assets/img/manual/transactions-list.jpg" alt="List of associated transactions" />

<p>
	Towards the top of the comparison report, a summary report is shown with the
	start and end dates for the budgeting period along with the beginning and
	ending balances.
</p>

<img src="assets/img/manual/report-summary.jpg" alt="Report summary" />

<h4>The Blacklist Report</h4>

<p>
	A second report is generated listing the transactions that were ignored when
	running the report (either because of user-blacklisted accounts or because of
	the transaction type) and is viewed by selecting the “Blacklist Report” option
	from the Report menu. Each transaction on this list includes a comment stating
	why it was ignored, or blacklisted.
</p>

<img src="assets/img/manual/blacklist-report.jpg" alt="Blacklist report" />

<p>
	The list can be sorted by double-clicking on the appropriate column title.
</p>

<img src="assets/img/manual/sorted-blacklist-report.jpg" alt="Sorted blacklist report" />

<h4>The Allocation Report</h4>

<p>
	A third report is generated listing each imported transaction that was matched
	against an estimate and is viewed by selecting the “Allocation Report” option
	from the Report menu. Each transaction on this list includes a comment stating
	to which estimate it was allocated and why.
</p>

<img src="assets/img/manual/allocation-report" alt="Allocation report" />

<p>
	The list can be sorted by double-clicking on the appropriate column title.
</p>

<img src="assets/img/manual/sorted-allocation-report.jpg" alt="Sorted allocation report" />

<h4>The Balance Report</h4>

<p>
	A fourth report is generated listing each estimate, it’s “final” value (see
	below), and a comment stating how the final value was calculated.
</p>

<img src="assets/img/manual/balance-report.jpg" alt="Balance report" />

<p>
	The list can be sorted by double-clicking on the appropriate column title.
</p>

<img src="assets/img/manual/sorted-balance-report.jpg" alt="Sorted balance report" />

<p>
	When calculating the expected ending balance, UnderBudget uses the initial
	balance provided by the user, adding all estimated income values and
	subtracting all estimated expense values.
</p>

<p>
	To calculate the actual ending balance, UnderBudget follows the following
	algorithm for each estimate.
</p>

<ol>
	<li>
		If the end date for the budgeting period occurred prior to the current date,
		all estimates are considered final and the actual values are used.
	</li>
	<li>
		Else, if an estimate has been marked final by the user (by editing the
		estimate) the actual value is used. This is used to indicate that no more
		transactions against this estimate are planned for the budgeting period (e.g.,
		no more grocery shopping for the month). This can also be used to indicate
		that a particular estimate is under-budget (e.g., car repairs were less than
		expected) or the expense will not actually occur in the budgeting period
		(e.g., postponed for the next month).
	</li>
	<li>
		Else, if the estimated value is greater than the current actual value, the
		estimated value is used. This allows for mid-period analyzing without
		drastically affecting the ending balance. For example...
		<ul>
			<li>
				A monthly budget has $100 estimated for groceries. Halfway through the
				month, $50 has been spent on groceries. The actual ending balance should
				still consider $100 to have been spent on groceries (i.e., extrapolated),
				rather than falsely $50 under-budget.
			</li>
		</ul>
	</li>
	<li>
		Else, the actual value is used. By this point, an estimate has not been marked
		final and the actual value exceeds the estimated value. This usually indicates
		an estimate that has gone over-budget. For example...
		<ul>
			<li>
				A monthly budget has $100 estimated for groceries. Three-fourths through the
				month, $105 has been spent on groceries. The actual ending balance will
				consider $105 to have been spent on groceries and $5 over-budget.
			</li>
		</ul>
	</li>
</ol>

